<Window x:Class="Bokhandel_Labb.Views.HanteraOrderSingelDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dto="clr-namespace:Bokhandel_Labb.DTOs"
        Title="Order Detaljer" 
        Height="700"
        Width="600"
        WindowStartupLocation="CenterOwner"
        FontFamily="Bahnschrift SemiLight"
        Background="#FF2F4F4F"
        Foreground="White"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- Style för OrderRad Items -->
        <Style x:Key="OrderRadItemStyle" TargetType="{x:Type ListBoxItem}">
            <Setter Property="Margin" Value="0,0,0,8"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="5"
                                Padding="12">
                            <ContentPresenter/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DataTemplate för OrderRader -->
        <DataTemplate x:Key="OrderRadTemplate" DataType="{x:Type dto:OrderRadDTO}">
            <Border Background="#FF3A5A5A"
                    CornerRadius="5"
                    Padding="12">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="{Binding BokTitel}" 
                                   FontWeight="Bold" 
                                   FontSize="14"
                                   Foreground="White"
                                   TextWrapping="Wrap"
                                   Margin="0,0,0,4"/>
                        <TextBlock Text="{Binding Författare}" 
                                   FontSize="12"
                                   Foreground="#FFB0C4C4"
                                   FontStyle="Italic"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" 
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Margin="15,0,0,0">
                        <TextBlock HorizontalAlignment="Right"
                                   Foreground="White"
                                   FontSize="12"
                                   Margin="0,0,0,2">
                            <Run Text="{Binding Antal, Mode=OneWay}"/>
                            <Run Text=" st × "/>
                            <Run Text="{Binding Pris, StringFormat='{}{0:N2} kr', Mode=OneWay}"/>
                        </TextBlock>
                        <TextBlock Text="{Binding Totalt, StringFormat='{}{0:N2} kr'}"
                                   HorizontalAlignment="Right"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Foreground="#FF81C784"/>
                    </StackPanel>
                </Grid>
            </Border>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <!-- Header -->
        <Border Background="#FF1A3333" 
                Height="70" 
                VerticalAlignment="Top">
            <Grid Margin="20,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                    <TextBlock FontSize="24" 
                               FontWeight="Bold"
                               Foreground="White">
                        <Run Text="📋 Order #"/>
                        <Run Text="{Binding ValdOrder.Id, Mode=OneWay}"/>
                    </TextBlock>
                </StackPanel>

                <StackPanel Grid.Column="1" 
                            VerticalAlignment="Center"
                            HorizontalAlignment="Right">
                    <Border Background="#FF4CAF50"
                            CornerRadius="15"
                            Padding="12,6">
                        <TextBlock Text="{Binding ValdOrder.Status}"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="White"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Content -->
        <Grid Margin="20,90,20,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Order Info -->
            <Border Grid.Row="0"
                    Background="#FF3A5A5A"
                    CornerRadius="5"
                    Padding="15"
                    Margin="0,0,0,15">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="📅 Orderdatum" 
                                   FontSize="11" 
                                   Foreground="#FFB0C4C4"
                                   Margin="0,0,0,5"/>
                        <TextBlock Text="{Binding ValdOrder.Orderdatum, StringFormat='yyyy-MM-dd HH:mm'}"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Foreground="White"/>

                        <TextBlock Text="🏪 Butik" 
                                   FontSize="11" 
                                   Foreground="#FFB0C4C4"
                                   Margin="0,15,0,5"/>
                        <TextBlock Text="{Binding ValdOrder.ButiksNamn}"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Foreground="White"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1">
                        <TextBlock Text="👤 Kund ID" 
                                   FontSize="11" 
                                   Foreground="#FFB0C4C4"
                                   Margin="0,0,0,5"/>
                        <TextBlock Text="{Binding ValdOrder.KundID}"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Foreground="White"/>

                        <TextBlock Text="📦 Antal böcker" 
                                   FontSize="11" 
                                   Foreground="#FFB0C4C4"
                                   Margin="0,15,0,5"/>
                        <TextBlock Text="{Binding ValdOrder.AntalBöcker}"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Foreground="White"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Orderrader Header -->
            <Border Grid.Row="1"
                    Background="#FF1A3333"
                    CornerRadius="5"
                    Padding="12"
                    Margin="0,0,0,10">
                <TextBlock Text="📚 Orderrader" 
                           FontSize="16" 
                           FontWeight="Bold"
                           Foreground="White"/>
            </Border>

            <!-- Orderrader List -->
            <Border Grid.Row="2"
                    Background="White"
                    CornerRadius="5"
                    Padding="10"
                    Margin="0,0,0,15">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <ListBox ItemsSource="{Binding ValdOrder.OrderRader}"
                             ItemTemplate="{StaticResource OrderRadTemplate}"
                             ItemContainerStyle="{StaticResource OrderRadItemStyle}"
                             BorderThickness="0"
                             Background="Transparent"
                             ScrollViewer.HorizontalScrollBarVisibility="Disabled"/>
                </ScrollViewer>
            </Border>

            <!-- Total Summa -->
            <Border Grid.Row="3"
                    Background="#FF1A3333"
                    CornerRadius="5"
                    Padding="15"
                    Margin="0,0,0,15">
                <Grid>
                    <TextBlock Text="💰 Total summa:" 
                               FontSize="18" 
                               FontWeight="Bold"
                               Foreground="White"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding ValdOrder.TotalBelopp, StringFormat='{}{0:N2} kr'}"
                               FontSize="24"
                               FontWeight="Bold"
                               Foreground="#FF81C784"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center"/>
                </Grid>
            </Border>

            <!-- Stäng knapp -->
            <Button Grid.Row="4"
                    Content="Stäng" 
                    Click="StängButton_Click"
                    Width="120" 
                    Height="40"
                    HorizontalAlignment="Center"
                    Background="#FF81C784"
                    Foreground="White"
                    FontWeight="SemiBold"
                    FontSize="14"
                    BorderBrush="#388E3C"
                    BorderThickness="2"
                    Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="ButtonBorder"
                                            Background="{TemplateBinding Background}"
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="5">
                                        <ContentPresenter HorizontalAlignment="Center" 
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#FF66BB6A"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="ButtonBorder" Property="RenderTransform">
                                                <Setter.Value>
                                                    <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                                </Setter.Value>
                                            </Setter>
                                            <Setter TargetName="ButtonBorder" Property="RenderTransformOrigin" Value="0.5,0.5"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>
    </Grid>
</Window>