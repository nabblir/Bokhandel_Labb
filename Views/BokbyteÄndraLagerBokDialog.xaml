<Window x:Class="Bokhandel_Labb.Views.BokbyteÄndraLagerBokDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Justera lagersaldo" 
        Height="500" 
        Width="500"
        WindowStartupLocation="CenterOwner"
        FontFamily="Bahnschrift SemiLight"
        Background="#FF2F4F4F"
        Foreground="White"
        ResizeMode="NoResize">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>
    <Grid>
        <!-- Header -->
        <Border Background="#FF1A3333" 
                Height="60" 
                VerticalAlignment="Top">
            <StackPanel VerticalAlignment="Center" Margin="20,0">
                <TextBlock Text="📝 Justera Lagersaldo" 
                           FontSize="20" 
                           FontWeight="Bold"
                           Foreground="White"/>
            </StackPanel>
        </Border>

        <!-- Content -->
        <Grid Margin="20,80,20,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Bokinfo -->
            <Border Grid.Row="0" 
                    Background="#FF3A5A5A"
                    CornerRadius="5"
                    Padding="15"
                    Margin="0,0,0,15">
                <StackPanel>
                    <TextBlock Text="{Binding BokTitel}" 
                               FontWeight="Bold" 
                               FontSize="16"
                               TextWrapping="Wrap"
                               Foreground="White"
                               Margin="0,0,0,8"/>
                    <TextBlock Text="{Binding AntalILager, StringFormat='Nuvarande lagersaldo: {0} st'}"
                               FontSize="13"
                               Foreground="#FFB0C4C4"/>
                </StackPanel>
            </Border>

            <!-- Input sektion -->
            <Border Grid.Row="1"
                    Background="#FF3A5A5A"
                    CornerRadius="5"
                    Padding="15"
                    Margin="0,0,0,20">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0"
                               Text="Nytt lagersaldo:" 
                               VerticalAlignment="Center" 
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,15,0"/>

                    <Border Grid.Column="1"
                            Background="White"
                            CornerRadius="3"
                            BorderBrush="#FF5A7A7A"
                            BorderThickness="2">
                        <TextBox Text="{Binding AntalText, UpdateSourceTrigger=PropertyChanged}" 
                                 Height="40"
                                 VerticalContentAlignment="Center"
                                 HorizontalContentAlignment="Center"
                                 FontSize="18"
                                 FontWeight="Bold"
                                 Foreground="Black"
                                 BorderThickness="0"
                                 Background="Transparent"
                                 Padding="10"/>
                    </Border>
                </Grid>
            </Border>

            <!-- Info text -->
            <Border Grid.Row="2"
                    Background="#4DFFEB3B"
                    CornerRadius="5"
                    Padding="12"
                    Margin="0,0,0,15">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="💡" 
                               FontSize="16" 
                               Margin="0,0,8,0"/>
                    <TextBlock Text="Ange det nya lagersaldot för denna bok i butiken"
                               FontSize="12"
                               TextWrapping="Wrap"
                               Foreground="White"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- Varning för noll lagersaldo -->
            <Border Grid.Row="3"
                    Background="#4DFF5722"
                    CornerRadius="5"
                    Padding="12"
                    Margin="0,0,0,15"
                    Visibility="{Binding VisaVarning, Converter={StaticResource BoolToVisibilityConverter}}">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="⚠️" 
                               FontSize="16" 
                               Margin="0,0,8,0"/>
                    <TextBlock Text="OBS! Lagersaldo 0 kommer att ta bort boken från butikens lager"
                               FontSize="12"
                               TextWrapping="Wrap"
                               Foreground="White"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- Knappar -->
            <StackPanel Grid.Row="5" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Right"
                        Margin="0,10,0,0">
                <Button Content="Avbryt" 
                        Command="{Binding CancelCommand}"
                        Width="100" 
                        Height="40"
                        Margin="0,0,10,0"
                        IsCancel="True"
                        Background="#FFE57373"
                        Foreground="White"
                        FontWeight="SemiBold" 
                        FontSize="14"
                        BorderBrush="#D32F2F"
                        BorderThickness="2"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="ButtonBorder"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="5">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#FFD32F2F"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="ButtonBorder" Property="RenderTransform">
                                                    <Setter.Value>
                                                        <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                                    </Setter.Value>
                                                </Setter>
                                                <Setter TargetName="ButtonBorder" Property="RenderTransformOrigin" Value="0.5,0.5"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>

                <Button Content="Spara" 
                        Command="{Binding OKCommand}"
                        Width="100" 
                        Height="40"
                        IsDefault="True"
                        Background="#FF81C784"
                        Foreground="White"
                        FontWeight="SemiBold"
                        FontSize="14"
                        BorderBrush="#388E3C"
                        BorderThickness="2"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="ButtonBorder"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="5">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#FF66BB6A"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="ButtonBorder" Property="RenderTransform">
                                                    <Setter.Value>
                                                        <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                                    </Setter.Value>
                                                </Setter>
                                                <Setter TargetName="ButtonBorder" Property="RenderTransformOrigin" Value="0.5,0.5"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</Window>